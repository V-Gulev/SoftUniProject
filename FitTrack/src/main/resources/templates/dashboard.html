<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/_header :: head}"></head>

<body>
    <header th:replace="~{fragments/_header :: header}"></header>

    <main class="container">
        <section class="card slide-up">
            <div class="mb-4">
                <h1>Your Dashboard</h1>
                <p>Quick snapshot of your progress and recent activity.</p>
            </div>

            <div class="list-cards">
                <div class="goal-card">
                    <h3>üéØ Total Goals</h3>
                    <p class="status" th:text="${goals.size()}">0</p>
                </div>
                <div class="goal-card">
                    <h3>‚ö° Active Goals</h3>
                    <p class="status" th:text="${activeGoalsCount}">0</p>
                </div>
                <div class="goal-card">
                    <h3>‚úÖ Completed</h3>
                    <p class="status" th:text="${completedGoalsCount}">0</p>
                </div>
                <div class="goal-card">
                    <h3>üìã Plans</h3>
                    <p class="status" th:text="${plans.size()}">0</p>
                </div>
                <div class="goal-card">
                    <h3>üìù Logs</h3>
                    <p class="status" th:text="${logs.size()}">0</p>
                </div>
            </div>
        </section>

        <section class="card slide-up">
            <div class="stagger"
                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem;">
                <div>
                    <h2>Recent Activity</h2>
                    <p class="mb-0" style="margin-bottom: 0;">Your 5 most recent workouts</p>
                </div>
                <div style="display: flex; gap: 0.5rem;">
                    <a th:href="@{/logs/add}" class="btn btn-primary">Log Workout</a>
                    <a th:href="@{/logs/history}" class="btn btn-outline">View History</a>
                </div>
            </div>

            <p th:if="${#lists.isEmpty(recentLogs)}" style="color: var(--text-muted); font-style: italic;">
                No workouts logged yet. Start your journey today!
            </p>

            <table th:if="${!#lists.isEmpty(recentLogs)}">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Duration (min)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="log : ${recentLogs}">
                        <td th:text="${log.date}">2025-01-01</td>
                        <td th:text="${log.durationMinutes}">30</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="card slide-up">
            <div class="stagger"
                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem;">
                <h2>Your Goals</h2>
                <div style="display: flex; gap: 0.5rem;">
                    <a th:href="@{/goals/add}" class="btn btn-primary">Add Goal</a>
                    <a th:href="@{/goals}" class="btn btn-outline">View All</a>
                </div>
            </div>

            <p th:if="${#lists.isEmpty(goals)}" style="color: var(--text-muted); font-style: italic;">
                No goals set yet. Challenge yourself!
            </p>

            <div class="list-cards" th:if="${!#lists.isEmpty(goals)}">
                <article class="goal-card" th:each="g : ${goals}">
                    <h3 th:text="${g.description}">Run 5k</h3>
                    <p class="meta">Target: <span th:text="${g.targetDate}"></span></p>
                    <div class="mt-4">
                        <span th:if="${g.isCompleted()}"
                            style="color: var(--success-text); font-weight: 600; display: inline-flex; align-items: center; gap: 0.25rem;">
                            <span>‚úì</span> Completed
                        </span>
                        <span th:unless="${g.isCompleted()}"
                            style="color: var(--accent-color); font-weight: 600; display: inline-flex; align-items: center; gap: 0.25rem;">
                            <span>‚ü≥</span> In Progress
                        </span>
                    </div>
                </article>
            </div>
        </section>

        <section class="card slide-up">
            <div class="stagger"
                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem;">
                <h2>Your Plans</h2>
                <div style="display: flex; gap: 0.5rem;">
                    <a th:href="@{/workout-plans/add}" class="btn btn-primary">Create Plan</a>
                    <a th:href="@{/workout-plans}" class="btn btn-outline">View All</a>
                </div>
            </div>

            <p th:if="${#lists.isEmpty(plans)}" style="color: var(--text-muted); font-style: italic;">
                No workout plans created yet.
            </p>

            <div class="list-cards" th:if="${!#lists.isEmpty(plans)}">
                <article class="goal-card" th:each="p : ${plans}">
                    <h3 th:text="${p.name}">Plan Name</h3>
                    <p class="meta" th:text="${p.description}">Description</p>
                </article>
            </div>
        </section>
    </main>
</body>

</html>
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/_header :: head}">
</head>
<body style="background-color: #0b1120; color: #cbd5e1;"> <!-- Dark theme body -->
<header th:replace="~{fragments/_header :: header}"></header>

<main class="container">

    <div style="max-width: 900px; margin: 2rem auto;">

        <!-- Success Message -->
        <div th:if="${successMessage}" style="background: #10b981; color: #065f46; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem; border: 1px solid #059669;">
            <span th:text="${successMessage}"></span>
        </div>

        <!-- Profile Header Card -->
        <div style="background: #1e293b; border-radius: 1rem; border: 1px solid #334155; overflow: hidden; margin-bottom: 2rem;">
            <!-- Card Header -->
            <div style="padding: 2rem; border-bottom: 1px solid #334155; background: rgba(30, 41, 59, 0.5);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h1 style="color: #ffffff; font-size: 2rem; font-weight: 600; margin: 0 0 0.5rem 0;">
                            <span th:text="${userProfile.username}">Username</span>
                        </h1>
                        <p style="color: #94a3b8; margin: 0;">Profile Information</p>
                    </div>
                    <a th:href="@{/profile/edit}" class="btn btn-primary" style="background: #10b981; color: #064e3b; font-weight: 600; text-decoration: none;">
                        Edit Profile
                    </a>
                </div>
            </div>

            <!-- Profile Details -->
            <div style="padding: 2rem;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    <!-- Email -->
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #94a3b8; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Email Address
                        </label>
                        <p style="color: #ffffff; font-size: 1rem; margin: 0;">
                            <span th:text="${userProfile.email}">user@example.com</span>
                        </p>
                    </div>

                    <!-- Roles -->
                    <div>
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #94a3b8; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Roles
                        </label>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <span th:each="role : ${userProfile.roles}"
                                  style="background: #0f172a; color: #60a5fa; padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-size: 0.875rem; border: 1px solid #334155;">
                                <span th:text="${role.name}">ROLE</span>
                            </span>
                        </div>
                    </div>

                    <!-- Last Activity -->
                    <div th:if="${userProfile.lastActivity}">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #94a3b8; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Last Activity
                        </label>
                        <p style="color: #ffffff; font-size: 1rem; margin: 0;">
                            <span th:text="${#temporals.format(userProfile.lastActivity, 'yyyy-MM-dd HH:mm')}">2025-01-01 12:00</span>
                        </p>
                    </div>

                    <!-- Active Workout Plan -->
                    <div th:if="${activePlan != null}">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #94a3b8; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Active Plan
                        </label>
                        <p style="color: #ffffff; font-size: 1rem; margin: 0;">
                            <span th:text="${activePlan.name}">Plan Name</span>
                        </p>
                    </div>
                    <div th:if="${activePlan == null}">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #94a3b8; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Active Plan
                        </label>
                        <p style="color: #64748b; font-size: 1rem; margin: 0; font-style: italic;">
                            No active plan
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Card -->
        <div style="background: #1e293b; border-radius: 1rem; border: 1px solid #334155; overflow: hidden; margin-bottom: 2rem;">
            <!-- Card Header -->
            <div style="padding: 1.5rem 2rem; border-bottom: 1px solid #334155; background: rgba(30, 41, 59, 0.5);">
                <h2 style="color: #ffffff; font-size: 1.5rem; font-weight: 600; margin: 0;">Your Statistics</h2>
                <p style="color: #94a3b8; margin: 0.25rem 0 0 0;">Overview of your fitness journey</p>
            </div>

            <!-- Stats Grid -->
            <div style="padding: 2rem;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1.5rem;">
                    <!-- Total Goals -->
                    <div style="background: #0f172a; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #334155; text-align: center;">
                        <h3 style="color: #94a3b8; font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Total Goals
                        </h3>
                        <p style="color: #60a5fa; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${totalGoals}">0</span>
                        </p>
                    </div>

                    <!-- Active Goals -->
                    <div style="background: #0f172a; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #334155; text-align: center;">
                        <h3 style="color: #94a3b8; font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Active Goals
                        </h3>
                        <p style="color: #10b981; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${activeGoals}">0</span>
                        </p>
                    </div>

                    <!-- Completed Goals -->
                    <div style="background: #0f172a; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #334155; text-align: center;">
                        <h3 style="color: #94a3b8; font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Completed Goals
                        </h3>
                        <p style="color: #f59e0b; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${completedGoals}">0</span>
                        </p>
                    </div>

                    <!-- Workout Plans -->
                    <div style="background: #0f172a; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #334155; text-align: center;">
                        <h3 style="color: #94a3b8; font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Workout Plans
                        </h3>
                        <p style="color: #a78bfa; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${totalPlans}">0</span>
                        </p>
                    </div>

                    <!-- Workout Logs -->
                    <div style="background: #0f172a; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #334155; text-align: center;">
                        <h3 style="color: #94a3b8; font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Workout Logs
                        </h3>
                        <p style="color: #ec4899; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${totalLogs}">0</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions Card -->
        <div style="background: #1e293b; border-radius: 1rem; border: 1px solid #334155; overflow: hidden;">
            <!-- Card Header -->
            <div style="padding: 1.5rem 2rem; border-bottom: 1px solid #334155; background: rgba(30, 41, 59, 0.5);">
                <h2 style="color: #ffffff; font-size: 1.5rem; font-weight: 600; margin: 0;">Quick Actions</h2>
                <p style="color: #94a3b8; margin: 0.25rem 0 0 0;">Manage your fitness journey</p>
            </div>

            <!-- Actions Grid -->
            <div style="padding: 2rem;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <a th:href="@{/goals/add}" style="background: #0f172a; border: 1px solid #334155; color: #ffffff; padding: 1rem; border-radius: 0.5rem; text-decoration: none; text-align: center; transition: all 0.2s;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">Add Goal</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">Set a new fitness goal</div>
                    </a>
                    <a th:href="@{/logs/add}" style="background: #0f172a; border: 1px solid #334155; color: #ffffff; padding: 1rem; border-radius: 0.5rem; text-decoration: none; text-align: center; transition: all 0.2s;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">Log Workout</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">Record your workout</div>
                    </a>
                    <a th:href="@{/workout-plans}" style="background: #0f172a; border: 1px solid #334155; color: #ffffff; padding: 1rem; border-radius: 0.5rem; text-decoration: none; text-align: center; transition: all 0.2s;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">My Plans</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">View workout plans</div>
                    </a>
                    <a th:href="@{/goals}" style="background: #0f172a; border: 1px solid #334155; color: #ffffff; padding: 1rem; border-radius: 0.5rem; text-decoration: none; text-align: center; transition: all 0.2s;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">My Goals</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">View all goals</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Badges Card -->
        <div style="background: #1e293b; border-radius: 1rem; border: 1px solid #334155; overflow: hidden; margin-top: 2rem;">
            <!-- Card Header -->
            <div style="padding: 1.5rem 2rem; border-bottom: 1px solid #334155; background: rgba(30, 41, 59, 0.5);">
                <h2 style="color: #ffffff; font-size: 1.5rem; font-weight: 600; margin: 0;">Your Badges</h2>
                <p style="color: #94a3b8; margin: 0.25rem 0 0 0;">Achievements you've earned</p>
            </div>

            <!-- Badges Grid -->
            <div style="padding: 2rem;">
                <div th:if="${#lists.isEmpty(badges)}" style="text-align: center; padding: 2rem;">
                    <p style="color: #94a3b8; margin: 0; font-style: italic;">No badges earned yet. Keep working towards your goals!</p>
                </div>
                <div th:if="${!#lists.isEmpty(badges)}" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 1.5rem;">
                    <div th:each="badge : ${badges}"
                         style="background: #0f172a; border: 1px solid #334155; border-radius: 0.75rem; padding: 1.5rem; text-align: center; transition: transform 0.2s, box-shadow 0.2s;"
                         onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.3)';"
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                        <div style="margin-bottom: 0.75rem;">
                            <img th:src="${badge.iconUrl}"
                                 th:alt="${badge.name}"
                                 style="width: 64px; height: 64px; object-fit: contain; margin: 0 auto; display: block;"
                                 onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22%23f59e0b%22%3E%3Cpath d=%22M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z%22/%3E%3C/svg%3E';" />
                        </div>
                        <h3 style="color: #ffffff; font-size: 0.875rem; font-weight: 600; margin: 0;">
                            <span th:text="${badge.name}">Badge Name</span>
                        </h3>
                        <form th:method="post" th:action="@{/badges/revoke/{badgeId}(badgeId=${badge.id})}" style="margin-top: 1rem;">
                            <button type="submit" class="btn btn-danger" style="background-color: #ef4444; color: #ffffff; border: none; padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; cursor: pointer;">
                                Revoke
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>

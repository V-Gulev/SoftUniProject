<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/_header :: head}"></head>

<body>
    <header th:replace="~{fragments/_header :: header}"></header>

    <main class="container">
        <div style="max-width: 900px; margin: 2rem auto;">

            <div th:if="${successMessage}" class="alert alert-success mb-4">
                <span th:text="${successMessage}"></span>
            </div>

            <div class="card slide-up mb-4">
                <div class="mb-4"
                    style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h1 class="mb-0" style="font-size: 2rem;">
                            <span th:text="${userProfile.username}">Username</span>
                        </h1>
                        <p class="mb-0" style="color: var(--text-muted);">Profile Information</p>
                    </div>
                    <a th:href="@{/profile/edit}" class="btn btn-primary">
                        Edit Profile
                    </a>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    <div>
                        <label
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dim); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Email Address
                        </label>
                        <p style="font-size: 1rem; margin: 0;">
                            <span th:text="${userProfile.email}">user@example.com</span>
                        </p>
                    </div>

                    <div>
                        <label
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dim); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Roles
                        </label>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <span th:each="role : ${userProfile.roles}"
                                style="background: var(--bg-body); color: var(--accent-color); padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-size: 0.875rem; border: 1px solid var(--border-color);">
                                <span th:text="${role.name}">ROLE</span>
                            </span>
                        </div>
                    </div>

                    <div th:if="${userProfile.lastActivity}">
                        <label
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dim); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Last Activity
                        </label>
                        <p style="font-size: 1rem; margin: 0;">
                            <span
                                th:text="${#temporals.format(userProfile.lastActivity, 'yyyy-MM-dd HH:mm')}">2025-01-01
                                12:00</span>
                        </p>
                    </div>

                    <div>
                        <label
                            style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dim); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
                            Active Plan
                        </label>
                        <p th:if="${activePlan != null}" style="font-size: 1rem; margin: 0;">
                            <span th:text="${activePlan.name}">Plan Name</span>
                        </p>
                        <p th:if="${activePlan == null}"
                            style="color: var(--text-muted); font-size: 1rem; margin: 0; font-style: italic;">
                            No active plan
                        </p>
                    </div>
                </div>
            </div>

            <div class="card slide-up mb-4">
                <div class="mb-4">
                    <h2 class="mb-0">Your Statistics</h2>
                    <p style="color: var(--text-muted); margin-top: 0.25rem;">Overview of your fitness journey</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1.5rem;">
                    <div
                        style="background: var(--bg-body); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border-color); text-align: center;">
                        <h3
                            style="color: var(--text-dim); font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Total Goals
                        </h3>
                        <p style="color: #60a5fa; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${totalGoals}">0</span>
                        </p>
                    </div>

                    <div
                        style="background: var(--bg-body); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border-color); text-align: center;">
                        <h3
                            style="color: var(--text-dim); font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Active Goals
                        </h3>
                        <p style="color: var(--primary-color); font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${activeGoals}">0</span>
                        </p>
                    </div>

                    <div
                        style="background: var(--bg-body); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border-color); text-align: center;">
                        <h3
                            style="color: var(--text-dim); font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Completed Goals
                        </h3>
                        <p style="color: #f59e0b; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${completedGoals}">0</span>
                        </p>
                    </div>

                    <div
                        style="background: var(--bg-body); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border-color); text-align: center;">
                        <h3
                            style="color: var(--text-dim); font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Workout Plans
                        </h3>
                        <p style="color: #a78bfa; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${totalPlans}">0</span>
                        </p>
                    </div>

                    <div
                        style="background: var(--bg-body); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border-color); text-align: center;">
                        <h3
                            style="color: var(--text-dim); font-size: 0.875rem; font-weight: 500; margin: 0 0 0.75rem 0; text-transform: uppercase; letter-spacing: 0.05em;">
                            Workout Logs
                        </h3>
                        <p style="color: #ec4899; font-size: 2rem; font-weight: 600; margin: 0;">
                            <span th:text="${totalLogs}">0</span>
                        </p>
                    </div>
                </div>
            </div>

            <div class="card slide-up mb-4">
                <div class="mb-4">
                    <h2 class="mb-0">Quick Actions</h2>
                    <p style="color: var(--text-muted); margin-top: 0.25rem;">Manage your fitness journey</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <a th:href="@{/goals/add}" class="btn btn-outline"
                        style="flex-direction: column; height: auto; padding: 1.5rem; text-align: center;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem; font-size: 1.1rem;">Add Goal</div>
                        <div style="color: var(--text-muted); font-size: 0.875rem; font-weight: normal;">Set a new
                            fitness goal</div>
                    </a>
                    <a th:href="@{/logs/add}" class="btn btn-outline"
                        style="flex-direction: column; height: auto; padding: 1.5rem; text-align: center;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem; font-size: 1.1rem;">Log Workout</div>
                        <div style="color: var(--text-muted); font-size: 0.875rem; font-weight: normal;">Record your
                            workout</div>
                    </a>
                    <a th:href="@{/workout-plans}" class="btn btn-outline"
                        style="flex-direction: column; height: auto; padding: 1.5rem; text-align: center;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem; font-size: 1.1rem;">My Plans</div>
                        <div style="color: var(--text-muted); font-size: 0.875rem; font-weight: normal;">View workout
                            plans</div>
                    </a>
                    <a th:href="@{/goals}" class="btn btn-outline"
                        style="flex-direction: column; height: auto; padding: 1.5rem; text-align: center;">
                        <div style="font-weight: 600; margin-bottom: 0.25rem; font-size: 1.1rem;">My Goals</div>
                        <div style="color: var(--text-muted); font-size: 0.875rem; font-weight: normal;">View all goals
                        </div>
                    </a>
                </div>
            </div>

            <div class="card slide-up">
                <div class="mb-4">
                    <h2 class="mb-0">Your Badges</h2>
                    <p style="color: var(--text-muted); margin-top: 0.25rem;">Achievements you've earned</p>
                </div>

                <div th:if="${#lists.isEmpty(badges)}" style="text-align: center; padding: 2rem;">
                    <p style="color: var(--text-muted); margin: 0; font-style: italic;">No badges earned yet. Keep
                        working towards your goals!</p>
                </div>
                <div th:if="${!#lists.isEmpty(badges)}"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 1.5rem;">
                    <div th:each="badge : ${badges}"
                        style="background: var(--bg-body); border: 1px solid var(--border-color); border-radius: 0.75rem; padding: 1.5rem; text-align: center; transition: transform 0.2s, box-shadow 0.2s;"
                        onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 16px rgba(0,0,0,0.3)';"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                        <div style="margin-bottom: 0.75rem;">
                            <img th:src="${badge.iconUrl}" th:alt="${badge.name}"
                                style="width: 64px; height: 64px; object-fit: contain; margin: 0 auto; display: block;"
                                onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22%23f59e0b%22%3E%3Cpath d=%22M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z%22/%3E%3C/svg%3E';" />
                        </div>
                        <h3 style="font-size: 0.875rem; font-weight: 600; margin: 0;">
                            <span th:text="${badge.name}">Badge Name</span>
                        </h3>
                        <form th:method="post" th:action="@{/badges/revoke/{badgeId}(badgeId=${badge.id})}"
                            style="margin-top: 1rem;">
                            <button type="submit" class="btn btn-danger"
                                style="padding: 0.25rem 0.75rem; font-size: 0.75rem;">
                                Revoke
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

</html>